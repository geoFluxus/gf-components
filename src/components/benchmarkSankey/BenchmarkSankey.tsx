import React from "react";
import {
  DefaultLink,
  DefaultNode,
  ResponsiveSankey,
  SankeyLayerId,
} from "@nivo/sankey";
import GlobalStyle from "../../globalStyles";
import CustomToolTip from "../customToolTip/CustomToolTip";
import { Flex, Typography, Row, Col } from "antd";
import styled from 'styled-components';


const { Text } = Typography
const StyledText = styled.span`
  font: var(--gf-label-md-default);
  color: var(--gf-color-text-secondary);
`

interface DefaultNodeWithExtras extends DefaultNode {
  rank: string;
  value: number;
  pct: number;
  unit: string;
  nodeColor: string;
}
interface DefaultLinkWithExtras extends DefaultLink {
  source_rank: string;
  target_rank: string;

  unit: string;
}
export interface Props {
  data: {
    nodes: DefaultNodeWithExtras[];
    links: DefaultLinkWithExtras[];
  };
  linkTooltip: ({ link }) => JSX.Element;
  nodeTooltip: ({ node }) => JSX.Element;
}

const scale = {
  A: "#39b54a",
  B: "#8cc63f",
  C: "#d9e021",
  D: "#fcee21",
  E: "#fbb03b",
  F: "#f7931e",
  G: "#f15a24",
  H: "#cc3333",
  I: "#4d4d4d",
};

const ranks = {
  A: "Direct hoogwaardig inzetten",
  B: "Indirect hoogwaardig inzetten",
  C: "Voorbereiding voor recycling",
  D: "Microbiologische verwerking",
  E: "Grondreiniging",
  F: "Verbranding met opbrengst",
  G: "Verbranden",
  H: "Storten",
  I: "Opslag",
};


const BenchmarkSankey: React.FC<Props> = ({
    data,
    margin={},
    height=null,
    nodeTooltip=null,
    linkTooltip=null
}) => {
  // node label
  const nodeLabelPadding = 2,
        nodeLabelFontSize = 22,
        nodeLabelBorderWidth = 2;
  const nodeLabelWidth = 270,
        nodeLabelHeight = nodeLabelPadding * 2 + (nodeLabelFontSize + 2) + nodeLabelBorderWidth * 2,
        nodeLabelOffsetX = 10;
  const nodeThickness = 20,
        nodeSpacing = nodeLabelHeight;

  // color nodes
  data.nodes = data.nodes.map((n) => ({
    ...n,
    nodeColor: scale[n.rank],
  }));

  // color links with target color
  data.links = data.links.map((l) => ({
    ...l,
    startColor: scale[l.target_rank],
    endColor: scale[l.target_rank],
  }));

  // node label
  const getNodeLabel = (n) =>
    `${
      n.pct > 1 ? n.pct.toFixed(0) : n.pct > 0.1 ? n.pct.toFixed(1) : "<0.1"
    }%`;

  const CustomNode = ({ node }) => {
    const transX = node.sourceLinks.length
        ? -(nodeLabelWidth + nodeLabelOffsetX)
        : nodeThickness + nodeLabelOffsetX,
      transY = node.height / 2 - nodeLabelHeight / 2;

    return (
      <g transform={`translate(${node.x0 + transX}, ${node.y0 + transY})`}>
        <foreignObject width={nodeLabelWidth} height={nodeLabelHeight}>
          <div
            style={{
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
              color: "black",
              textAlign: "center",
              padding: `${nodeLabelPadding}px`,
              border: `${nodeLabelBorderWidth}px solid ${node.color}`,
              whiteSpace: 'nowrap'
            }}
          >
            <StyledText><b>{`${node.rank} - ${ranks[node.rank]}`}</b></StyledText>
            <StyledText>{getNodeLabel(node)}</StyledText>
          </div>
        </foreignObject>
      </g>
    );
  };

  // @ts-ignore
  const CustomNodeLayer: SankeyLayerId = ({ nodes }) =>
    nodes.map((node) => <CustomNode key={node.id} node={node} />);

  const LabelLayer = ({ nodes }) => {
    function getMinMax(array, prop) {
      if (!array.length) return { min: null, max: null };

      let min = array[0][prop];
      let max = array[0][prop];

      for (const obj of array) {
        const val = obj[prop];
        if (val < min) min = val;
        if (val > max) max = val;
      }

      return { min, max };
    }
    const result = getMinMax(nodes, "x0");

    return (
        <>
            <g transform={`
                translate(${result?.min -(nodeLabelWidth + nodeLabelOffsetX)},
                ${-(margin?.top || 50)})
            `}>
                <path d="M11.7512 6.90789L6.63668 1.73557L6.29387 1.38869C6.21576 1.31018 6.11013 1.26611 6.00002 1.26611C5.88992 1.26611 5.78429 1.31018 5.70618 1.38869L0.248895 6.90789C0.168858 6.98856 0.105602 7.08463 0.0628634 7.19045C0.0201246 7.29626 -0.0012318 7.40966 5.48636e-05 7.52396C0.00534934 7.99539 0.39317 8.37173 0.859084 8.37173H1.42162V12.7338H10.5784V8.37173H11.1529C11.3792 8.37173 11.5923 8.282 11.7525 8.11994C11.8313 8.0404 11.8938 7.94583 11.9363 7.84169C11.9788 7.73754 12.0004 7.62591 12 7.51325C12 7.28557 11.9113 7.06994 11.7512 6.90789ZM7.41227 12.7338H4.44736V9.03735H7.41227V12.7338Z" fill="#98A2B3"/>
                <path d="M22.5625 6.13672V7.05664H17.9453V6.13672H22.5625ZM18.1211 2.46875V11H16.9902V2.46875H18.1211ZM23.5469 2.46875V11H22.4219V2.46875H23.5469ZM29.2715 9.53516V4.66016H30.3613V11H29.3242L29.2715 9.53516ZM29.4766 8.19922L29.9277 8.1875C29.9277 8.60938 29.8828 9 29.793 9.35938C29.707 9.71484 29.5664 10.0234 29.3711 10.2852C29.1758 10.5469 28.9199 10.752 28.6035 10.9004C28.2871 11.0449 27.9023 11.1172 27.4492 11.1172C27.1406 11.1172 26.8574 11.0723 26.5996 10.9824C26.3457 10.8926 26.127 10.7539 25.9434 10.5664C25.7598 10.3789 25.6172 10.1348 25.5156 9.83398C25.418 9.5332 25.3691 9.17188 25.3691 8.75V4.66016H26.4531V8.76172C26.4531 9.04688 26.4844 9.2832 26.5469 9.4707C26.6133 9.6543 26.7012 9.80078 26.8105 9.91016C26.9238 10.0156 27.0488 10.0898 27.1855 10.1328C27.3262 10.1758 27.4707 10.1973 27.6191 10.1973C28.0801 10.1973 28.4453 10.1094 28.7148 9.93359C28.9844 9.75391 29.1777 9.51367 29.2949 9.21289C29.416 8.9082 29.4766 8.57031 29.4766 8.19922ZM33.1914 4.66016V11H32.1016V4.66016H33.1914ZM32.0195 2.97852C32.0195 2.80273 32.0723 2.6543 32.1777 2.5332C32.2871 2.41211 32.4473 2.35156 32.6582 2.35156C32.8652 2.35156 33.0234 2.41211 33.1328 2.5332C33.2461 2.6543 33.3027 2.80273 33.3027 2.97852C33.3027 3.14648 33.2461 3.29102 33.1328 3.41211C33.0234 3.5293 32.8652 3.58789 32.6582 3.58789C32.4473 3.58789 32.2871 3.5293 32.1777 3.41211C32.0723 3.29102 32.0195 3.14648 32.0195 2.97852ZM38.9277 9.76953V2H40.0176V11H39.0215L38.9277 9.76953ZM34.6621 7.90039V7.77734C34.6621 7.29297 34.7207 6.85352 34.8379 6.45898C34.959 6.06055 35.1289 5.71875 35.3477 5.43359C35.5703 5.14844 35.834 4.92969 36.1387 4.77734C36.4473 4.62109 36.791 4.54297 37.1699 4.54297C37.5684 4.54297 37.916 4.61328 38.2129 4.75391C38.5137 4.89062 38.7676 5.0918 38.9746 5.35742C39.1855 5.61914 39.3516 5.93555 39.4727 6.30664C39.5938 6.67773 39.6777 7.09766 39.7246 7.56641V8.10547C39.6816 8.57031 39.5977 8.98828 39.4727 9.35938C39.3516 9.73047 39.1855 10.0469 38.9746 10.3086C38.7676 10.5703 38.5137 10.7715 38.2129 10.9121C37.9121 11.0488 37.5605 11.1172 37.1582 11.1172C36.7871 11.1172 36.4473 11.0371 36.1387 10.877C35.834 10.7168 35.5703 10.4922 35.3477 10.2031C35.1289 9.91406 34.959 9.57422 34.8379 9.18359C34.7207 8.78906 34.6621 8.36133 34.6621 7.90039ZM35.752 7.77734V7.90039C35.752 8.2168 35.7832 8.51367 35.8457 8.79102C35.9121 9.06836 36.0137 9.3125 36.1504 9.52344C36.2871 9.73438 36.4609 9.90039 36.6719 10.0215C36.8828 10.1387 37.1348 10.1973 37.4277 10.1973C37.7871 10.1973 38.082 10.1211 38.3125 9.96875C38.5469 9.81641 38.7344 9.61523 38.875 9.36523C39.0156 9.11523 39.125 8.84375 39.2031 8.55078V7.13867C39.1562 6.92383 39.0879 6.7168 38.998 6.51758C38.9121 6.31445 38.7988 6.13477 38.6582 5.97852C38.5215 5.81836 38.3516 5.69141 38.1484 5.59766C37.9492 5.50391 37.7129 5.45703 37.4395 5.45703C37.1426 5.45703 36.8867 5.51953 36.6719 5.64453C36.4609 5.76562 36.2871 5.93359 36.1504 6.14844C36.0137 6.35938 35.9121 6.60547 35.8457 6.88672C35.7832 7.16406 35.752 7.46094 35.752 7.77734ZM42.8828 4.66016V11H41.793V4.66016H42.8828ZM41.7109 2.97852C41.7109 2.80273 41.7637 2.6543 41.8691 2.5332C41.9785 2.41211 42.1387 2.35156 42.3496 2.35156C42.5566 2.35156 42.7148 2.41211 42.8242 2.5332C42.9375 2.6543 42.9941 2.80273 42.9941 2.97852C42.9941 3.14648 42.9375 3.29102 42.8242 3.41211C42.7148 3.5293 42.5566 3.58789 42.3496 3.58789C42.1387 3.58789 41.9785 3.5293 41.8691 3.41211C41.7637 3.29102 41.7109 3.14648 41.7109 2.97852ZM48.7305 4.66016H49.7148V10.8652C49.7148 11.4238 49.6016 11.9004 49.375 12.2949C49.1484 12.6895 48.832 12.9883 48.4258 13.1914C48.0234 13.3984 47.5586 13.502 47.0312 13.502C46.8125 13.502 46.5547 13.4668 46.2578 13.3965C45.9648 13.3301 45.6758 13.2148 45.3906 13.0508C45.1094 12.8906 44.873 12.6738 44.6816 12.4004L45.25 11.7559C45.5156 12.0762 45.793 12.2988 46.082 12.4238C46.375 12.5488 46.6641 12.6113 46.9492 12.6113C47.293 12.6113 47.5898 12.5469 47.8398 12.418C48.0898 12.2891 48.2832 12.0977 48.4199 11.8438C48.5605 11.5938 48.6309 11.2852 48.6309 10.918V6.05469L48.7305 4.66016ZM44.3652 7.90039V7.77734C44.3652 7.29297 44.4219 6.85352 44.5352 6.45898C44.6523 6.06055 44.8184 5.71875 45.0332 5.43359C45.252 5.14844 45.5156 4.92969 45.8242 4.77734C46.1328 4.62109 46.4805 4.54297 46.8672 4.54297C47.2656 4.54297 47.6133 4.61328 47.9102 4.75391C48.2109 4.89062 48.4648 5.0918 48.6719 5.35742C48.8828 5.61914 49.0488 5.93555 49.1699 6.30664C49.291 6.67773 49.375 7.09766 49.4219 7.56641V8.10547C49.3789 8.57031 49.2949 8.98828 49.1699 9.35938C49.0488 9.73047 48.8828 10.0469 48.6719 10.3086C48.4648 10.5703 48.2109 10.7715 47.9102 10.9121C47.6094 11.0488 47.2578 11.1172 46.8555 11.1172C46.4766 11.1172 46.1328 11.0371 45.8242 10.877C45.5195 10.7168 45.2578 10.4922 45.0391 10.2031C44.8203 9.91406 44.6523 9.57422 44.5352 9.18359C44.4219 8.78906 44.3652 8.36133 44.3652 7.90039ZM45.4492 7.77734V7.90039C45.4492 8.2168 45.4805 8.51367 45.543 8.79102C45.6094 9.06836 45.709 9.3125 45.8418 9.52344C45.9785 9.73438 46.1523 9.90039 46.3633 10.0215C46.5742 10.1387 46.8262 10.1973 47.1191 10.1973C47.4785 10.1973 47.7754 10.1211 48.0098 9.96875C48.2441 9.81641 48.4297 9.61523 48.5664 9.36523C48.707 9.11523 48.8164 8.84375 48.8945 8.55078V7.13867C48.8516 6.92383 48.7852 6.7168 48.6953 6.51758C48.6094 6.31445 48.4961 6.13477 48.3555 5.97852C48.2188 5.81836 48.0488 5.69141 47.8457 5.59766C47.6426 5.50391 47.4043 5.45703 47.1309 5.45703C46.834 5.45703 46.5781 5.51953 46.3633 5.64453C46.1523 5.76562 45.9785 5.93359 45.8418 6.14844C45.709 6.35938 45.6094 6.60547 45.543 6.88672C45.4805 7.16406 45.4492 7.46094 45.4492 7.77734ZM53.9922 11.1172C53.5508 11.1172 53.1504 11.043 52.791 10.8945C52.4355 10.7422 52.1289 10.5293 51.8711 10.2559C51.6172 9.98242 51.4219 9.6582 51.2852 9.2832C51.1484 8.9082 51.0801 8.49805 51.0801 8.05273V7.80664C51.0801 7.29102 51.1562 6.83203 51.3086 6.42969C51.4609 6.02344 51.668 5.67969 51.9297 5.39844C52.1914 5.11719 52.4883 4.9043 52.8203 4.75977C53.1523 4.61523 53.4961 4.54297 53.8516 4.54297C54.3047 4.54297 54.6953 4.62109 55.0234 4.77734C55.3555 4.93359 55.627 5.15234 55.8379 5.43359C56.0488 5.71094 56.2051 6.03906 56.3066 6.41797C56.4082 6.79297 56.459 7.20312 56.459 7.64844V8.13477H51.7246V7.25H55.375V7.16797C55.3594 6.88672 55.3008 6.61328 55.1992 6.34766C55.1016 6.08203 54.9453 5.86328 54.7305 5.69141C54.5156 5.51953 54.2227 5.43359 53.8516 5.43359C53.6055 5.43359 53.3789 5.48633 53.1719 5.5918C52.9648 5.69336 52.7871 5.8457 52.6387 6.04883C52.4902 6.25195 52.375 6.5 52.293 6.79297C52.2109 7.08594 52.1699 7.42383 52.1699 7.80664V8.05273C52.1699 8.35352 52.2109 8.63672 52.293 8.90234C52.3789 9.16406 52.502 9.39453 52.6621 9.59375C52.8262 9.79297 53.0234 9.94922 53.2539 10.0625C53.4883 10.1758 53.7539 10.2324 54.0508 10.2324C54.4336 10.2324 54.7578 10.1543 55.0234 9.99805C55.2891 9.8418 55.5215 9.63281 55.7207 9.37109L56.377 9.89258C56.2402 10.0996 56.0664 10.2969 55.8555 10.4844C55.6445 10.6719 55.3848 10.8242 55.0762 10.9414C54.7715 11.0586 54.4102 11.1172 53.9922 11.1172ZM62.6289 10.0215L64.3633 4.66016H65.4707L63.1914 11H62.4648L62.6289 10.0215ZM61.1816 4.66016L62.9688 10.0508L63.0918 11H62.3652L60.0684 4.66016H61.1816ZM69.0625 11.1172C68.6211 11.1172 68.2207 11.043 67.8613 10.8945C67.5059 10.7422 67.1992 10.5293 66.9414 10.2559C66.6875 9.98242 66.4922 9.6582 66.3555 9.2832C66.2188 8.9082 66.1504 8.49805 66.1504 8.05273V7.80664C66.1504 7.29102 66.2266 6.83203 66.3789 6.42969C66.5312 6.02344 66.7383 5.67969 67 5.39844C67.2617 5.11719 67.5586 4.9043 67.8906 4.75977C68.2227 4.61523 68.5664 4.54297 68.9219 4.54297C69.375 4.54297 69.7656 4.62109 70.0938 4.77734C70.4258 4.93359 70.6973 5.15234 70.9082 5.43359C71.1191 5.71094 71.2754 6.03906 71.377 6.41797C71.4785 6.79297 71.5293 7.20312 71.5293 7.64844V8.13477H66.7949V7.25H70.4453V7.16797C70.4297 6.88672 70.3711 6.61328 70.2695 6.34766C70.1719 6.08203 70.0156 5.86328 69.8008 5.69141C69.5859 5.51953 69.293 5.43359 68.9219 5.43359C68.6758 5.43359 68.4492 5.48633 68.2422 5.5918C68.0352 5.69336 67.8574 5.8457 67.709 6.04883C67.5605 6.25195 67.4453 6.5 67.3633 6.79297C67.2812 7.08594 67.2402 7.42383 67.2402 7.80664V8.05273C67.2402 8.35352 67.2812 8.63672 67.3633 8.90234C67.4492 9.16406 67.5723 9.39453 67.7324 9.59375C67.8965 9.79297 68.0938 9.94922 68.3242 10.0625C68.5586 10.1758 68.8242 10.2324 69.1211 10.2324C69.5039 10.2324 69.8281 10.1543 70.0938 9.99805C70.3594 9.8418 70.5918 9.63281 70.791 9.37109L71.4473 9.89258C71.3105 10.0996 71.1367 10.2969 70.9258 10.4844C70.7148 10.6719 70.4551 10.8242 70.1465 10.9414C69.8418 11.0586 69.4805 11.1172 69.0625 11.1172ZM73.8789 5.65625V11H72.7949V4.66016H73.8496L73.8789 5.65625ZM75.8594 4.625L75.8535 5.63281C75.7637 5.61328 75.6777 5.60156 75.5957 5.59766C75.5176 5.58984 75.4277 5.58594 75.3262 5.58594C75.0762 5.58594 74.8555 5.625 74.6641 5.70312C74.4727 5.78125 74.3105 5.89062 74.1777 6.03125C74.0449 6.17188 73.9395 6.33984 73.8613 6.53516C73.7871 6.72656 73.7383 6.9375 73.7148 7.16797L73.4102 7.34375C73.4102 6.96094 73.4473 6.60156 73.5215 6.26562C73.5996 5.92969 73.7188 5.63281 73.8789 5.375C74.0391 5.11328 74.2422 4.91016 74.4883 4.76562C74.7383 4.61719 75.0352 4.54297 75.3789 4.54297C75.457 4.54297 75.5469 4.55273 75.6484 4.57227C75.75 4.58789 75.8203 4.60547 75.8594 4.625ZM78.5723 9.875L80.2012 4.66016H80.916L80.7754 5.69727L79.1172 11H78.4199L78.5723 9.875ZM77.4766 4.66016L78.8652 9.93359L78.9648 11H78.2324L76.3926 4.66016H77.4766ZM82.4746 9.89258L83.7988 4.66016H84.877L83.0371 11H82.3105L82.4746 9.89258ZM81.0742 4.66016L82.668 9.78711L82.8496 11H82.1582L80.4531 5.68555L80.3125 4.66016H81.0742ZM88.6211 11.1172C88.1797 11.1172 87.7793 11.043 87.4199 10.8945C87.0645 10.7422 86.7578 10.5293 86.5 10.2559C86.2461 9.98242 86.0508 9.6582 85.9141 9.2832C85.7773 8.9082 85.709 8.49805 85.709 8.05273V7.80664C85.709 7.29102 85.7852 6.83203 85.9375 6.42969C86.0898 6.02344 86.2969 5.67969 86.5586 5.39844C86.8203 5.11719 87.1172 4.9043 87.4492 4.75977C87.7812 4.61523 88.125 4.54297 88.4805 4.54297C88.9336 4.54297 89.3242 4.62109 89.6523 4.77734C89.9844 4.93359 90.2559 5.15234 90.4668 5.43359C90.6777 5.71094 90.834 6.03906 90.9355 6.41797C91.0371 6.79297 91.0879 7.20312 91.0879 7.64844V8.13477H86.3535V7.25H90.0039V7.16797C89.9883 6.88672 89.9297 6.61328 89.8281 6.34766C89.7305 6.08203 89.5742 5.86328 89.3594 5.69141C89.1445 5.51953 88.8516 5.43359 88.4805 5.43359C88.2344 5.43359 88.0078 5.48633 87.8008 5.5918C87.5938 5.69336 87.416 5.8457 87.2676 6.04883C87.1191 6.25195 87.0039 6.5 86.9219 6.79297C86.8398 7.08594 86.7988 7.42383 86.7988 7.80664V8.05273C86.7988 8.35352 86.8398 8.63672 86.9219 8.90234C87.0078 9.16406 87.1309 9.39453 87.291 9.59375C87.4551 9.79297 87.6523 9.94922 87.8828 10.0625C88.1172 10.1758 88.3828 10.2324 88.6797 10.2324C89.0625 10.2324 89.3867 10.1543 89.6523 9.99805C89.918 9.8418 90.1504 9.63281 90.3496 9.37109L91.0059 9.89258C90.8691 10.0996 90.6953 10.2969 90.4844 10.4844C90.2734 10.6719 90.0137 10.8242 89.7051 10.9414C89.4004 11.0586 89.0391 11.1172 88.6211 11.1172ZM93.4375 5.65625V11H92.3535V4.66016H93.4082L93.4375 5.65625ZM95.418 4.625L95.4121 5.63281C95.3223 5.61328 95.2363 5.60156 95.1543 5.59766C95.0762 5.58984 94.9863 5.58594 94.8848 5.58594C94.6348 5.58594 94.4141 5.625 94.2227 5.70312C94.0312 5.78125 93.8691 5.89062 93.7363 6.03125C93.6035 6.17188 93.498 6.33984 93.4199 6.53516C93.3457 6.72656 93.2969 6.9375 93.2734 7.16797L92.9688 7.34375C92.9688 6.96094 93.0059 6.60156 93.0801 6.26562C93.1582 5.92969 93.2773 5.63281 93.4375 5.375C93.5977 5.11328 93.8008 4.91016 94.0469 4.76562C94.2969 4.61719 94.5938 4.54297 94.9375 4.54297C95.0156 4.54297 95.1055 4.55273 95.207 4.57227C95.3086 4.58789 95.3789 4.60547 95.418 4.625ZM97.5098 2V11H96.4199V2H97.5098ZM101.383 4.66016L98.6172 7.61914L97.0703 9.22461L96.9824 8.07031L98.0898 6.74609L100.059 4.66016H101.383ZM100.393 11L98.1309 7.97656L98.6934 7.00977L101.67 11H100.393ZM103.68 4.66016V11H102.59V4.66016H103.68ZM102.508 2.97852C102.508 2.80273 102.561 2.6543 102.666 2.5332C102.775 2.41211 102.936 2.35156 103.146 2.35156C103.354 2.35156 103.512 2.41211 103.621 2.5332C103.734 2.6543 103.791 2.80273 103.791 2.97852C103.791 3.14648 103.734 3.29102 103.621 3.41211C103.512 3.5293 103.354 3.58789 103.146 3.58789C102.936 3.58789 102.775 3.5293 102.666 3.41211C102.561 3.29102 102.508 3.14648 102.508 2.97852ZM106.504 6.01367V11H105.42V4.66016H106.445L106.504 6.01367ZM106.246 7.58984L105.795 7.57227C105.799 7.13867 105.863 6.73828 105.988 6.37109C106.113 6 106.289 5.67773 106.516 5.4043C106.742 5.13086 107.012 4.91992 107.324 4.77148C107.641 4.61914 107.99 4.54297 108.373 4.54297C108.686 4.54297 108.967 4.58594 109.217 4.67188C109.467 4.75391 109.68 4.88672 109.855 5.07031C110.035 5.25391 110.172 5.49219 110.266 5.78516C110.359 6.07422 110.406 6.42773 110.406 6.8457V11H109.316V6.83398C109.316 6.50195 109.268 6.23633 109.17 6.03711C109.072 5.83398 108.93 5.6875 108.742 5.59766C108.555 5.50391 108.324 5.45703 108.051 5.45703C107.781 5.45703 107.535 5.51367 107.312 5.62695C107.094 5.74023 106.904 5.89648 106.744 6.0957C106.588 6.29492 106.465 6.52344 106.375 6.78125C106.289 7.03516 106.246 7.30469 106.246 7.58984ZM116.16 4.66016H117.145V10.8652C117.145 11.4238 117.031 11.9004 116.805 12.2949C116.578 12.6895 116.262 12.9883 115.855 13.1914C115.453 13.3984 114.988 13.502 114.461 13.502C114.242 13.502 113.984 13.4668 113.688 13.3965C113.395 13.3301 113.105 13.2148 112.82 13.0508C112.539 12.8906 112.303 12.6738 112.111 12.4004L112.68 11.7559C112.945 12.0762 113.223 12.2988 113.512 12.4238C113.805 12.5488 114.094 12.6113 114.379 12.6113C114.723 12.6113 115.02 12.5469 115.27 12.418C115.52 12.2891 115.713 12.0977 115.85 11.8438C115.99 11.5938 116.061 11.2852 116.061 10.918V6.05469L116.16 4.66016ZM111.795 7.90039V7.77734C111.795 7.29297 111.852 6.85352 111.965 6.45898C112.082 6.06055 112.248 5.71875 112.463 5.43359C112.682 5.14844 112.945 4.92969 113.254 4.77734C113.562 4.62109 113.91 4.54297 114.297 4.54297C114.695 4.54297 115.043 4.61328 115.34 4.75391C115.641 4.89062 115.895 5.0918 116.102 5.35742C116.312 5.61914 116.479 5.93555 116.6 6.30664C116.721 6.67773 116.805 7.09766 116.852 7.56641V8.10547C116.809 8.57031 116.725 8.98828 116.6 9.35938C116.479 9.73047 116.312 10.0469 116.102 10.3086C115.895 10.5703 115.641 10.7715 115.34 10.9121C115.039 11.0488 114.688 11.1172 114.285 11.1172C113.906 11.1172 113.562 11.0371 113.254 10.877C112.949 10.7168 112.688 10.4922 112.469 10.2031C112.25 9.91406 112.082 9.57422 111.965 9.18359C111.852 8.78906 111.795 8.36133 111.795 7.90039ZM112.879 7.77734V7.90039C112.879 8.2168 112.91 8.51367 112.973 8.79102C113.039 9.06836 113.139 9.3125 113.271 9.52344C113.408 9.73438 113.582 9.90039 113.793 10.0215C114.004 10.1387 114.256 10.1973 114.549 10.1973C114.908 10.1973 115.205 10.1211 115.439 9.96875C115.674 9.81641 115.859 9.61523 115.996 9.36523C116.137 9.11523 116.246 8.84375 116.324 8.55078V7.13867C116.281 6.92383 116.215 6.7168 116.125 6.51758C116.039 6.31445 115.926 6.13477 115.785 5.97852C115.648 5.81836 115.479 5.69141 115.275 5.59766C115.072 5.50391 114.834 5.45703 114.561 5.45703C114.264 5.45703 114.008 5.51953 113.793 5.64453C113.582 5.76562 113.408 5.93359 113.271 6.14844C113.139 6.35938 113.039 6.60547 112.973 6.88672C112.91 7.16406 112.879 7.46094 112.879 7.77734Z" fill="#1D2939"/>
            </g>

            <g transform={`
                translate(${result?.max + nodeThickness + nodeLabelWidth + nodeLabelOffsetX - 113},
                ${-(margin?.top || 50)})
            `}>
                <g clip-path="url(#clip0_1902_43582)">
                    <path d="M10.7676 2.28739H9.53544V1.75167C9.53544 1.69275 9.48722 1.64453 9.42829 1.64453H2.57115C2.51222 1.64453 2.46401 1.69275 2.46401 1.75167V2.28739H1.23186C1.07558 2.28739 0.925688 2.34947 0.815176 2.45999C0.704663 2.5705 0.642578 2.72039 0.642578 2.87667V4.85882C0.642578 5.95301 1.44615 6.86239 2.49347 7.02846C2.70106 8.58471 3.95061 9.81016 5.51758 9.98159V11.3905H2.89258C2.65552 11.3905 2.46401 11.582 2.46401 11.8191V12.2517C2.46401 12.3106 2.51222 12.3588 2.57115 12.3588H9.42829C9.48722 12.3588 9.53544 12.3106 9.53544 12.2517V11.8191C9.53544 11.582 9.34392 11.3905 9.10686 11.3905H6.48186V9.98159C8.04883 9.81016 9.29838 8.58471 9.50597 7.02846C10.5533 6.86239 11.3569 5.95301 11.3569 4.85882V2.87667C11.3569 2.72039 11.2948 2.5705 11.1843 2.45999C11.0738 2.34947 10.9239 2.28739 10.7676 2.28739ZM1.60686 4.85882V3.25167H2.46401V6.03203C2.21523 5.95257 1.99814 5.79611 1.84408 5.58523C1.69001 5.37435 1.60694 5.11998 1.60686 4.85882ZM8.57115 6.5731C8.57115 7.23069 8.31535 7.85078 7.84927 8.31551C7.3832 8.78159 6.76445 9.03739 6.10686 9.03739H5.89258C5.23499 9.03739 4.6149 8.78159 4.15017 8.31551C3.6841 7.84944 3.42829 7.23069 3.42829 6.5731V2.60882H8.57115V6.5731ZM10.3926 4.85882C10.3926 5.40792 10.0323 5.874 9.53544 6.03203V3.25167H10.3926V4.85882Z" fill="#98A2B3"/>
                </g>
                <path d="M19.7441 9.70508L22.2578 2.46875H23.4824L20.3242 11H19.4512L19.7441 9.70508ZM17.3945 2.46875L19.8848 9.70508L20.1953 11H19.3223L16.1699 2.46875H17.3945ZM26.8398 11.1172C26.3984 11.1172 25.998 11.043 25.6387 10.8945C25.2832 10.7422 24.9766 10.5293 24.7188 10.2559C24.4648 9.98242 24.2695 9.6582 24.1328 9.2832C23.9961 8.9082 23.9277 8.49805 23.9277 8.05273V7.80664C23.9277 7.29102 24.0039 6.83203 24.1562 6.42969C24.3086 6.02344 24.5156 5.67969 24.7773 5.39844C25.0391 5.11719 25.3359 4.9043 25.668 4.75977C26 4.61523 26.3438 4.54297 26.6992 4.54297C27.1523 4.54297 27.543 4.62109 27.8711 4.77734C28.2031 4.93359 28.4746 5.15234 28.6855 5.43359C28.8965 5.71094 29.0527 6.03906 29.1543 6.41797C29.2559 6.79297 29.3066 7.20312 29.3066 7.64844V8.13477H24.5723V7.25H28.2227V7.16797C28.207 6.88672 28.1484 6.61328 28.0469 6.34766C27.9492 6.08203 27.793 5.86328 27.5781 5.69141C27.3633 5.51953 27.0703 5.43359 26.6992 5.43359C26.4531 5.43359 26.2266 5.48633 26.0195 5.5918C25.8125 5.69336 25.6348 5.8457 25.4863 6.04883C25.3379 6.25195 25.2227 6.5 25.1406 6.79297C25.0586 7.08594 25.0176 7.42383 25.0176 7.80664V8.05273C25.0176 8.35352 25.0586 8.63672 25.1406 8.90234C25.2266 9.16406 25.3496 9.39453 25.5098 9.59375C25.6738 9.79297 25.8711 9.94922 26.1016 10.0625C26.3359 10.1758 26.6016 10.2324 26.8984 10.2324C27.2812 10.2324 27.6055 10.1543 27.8711 9.99805C28.1367 9.8418 28.3691 9.63281 28.5684 9.37109L29.2246 9.89258C29.0879 10.0996 28.9141 10.2969 28.7031 10.4844C28.4922 10.6719 28.2324 10.8242 27.9238 10.9414C27.6191 11.0586 27.2578 11.1172 26.8398 11.1172ZM31.6562 5.65625V11H30.5723V4.66016H31.627L31.6562 5.65625ZM33.6367 4.625L33.6309 5.63281C33.541 5.61328 33.4551 5.60156 33.373 5.59766C33.2949 5.58984 33.2051 5.58594 33.1035 5.58594C32.8535 5.58594 32.6328 5.625 32.4414 5.70312C32.25 5.78125 32.0879 5.89062 31.9551 6.03125C31.8223 6.17188 31.7168 6.33984 31.6387 6.53516C31.5645 6.72656 31.5156 6.9375 31.4922 7.16797L31.1875 7.34375C31.1875 6.96094 31.2246 6.60156 31.2988 6.26562C31.377 5.92969 31.4961 5.63281 31.6562 5.375C31.8164 5.11328 32.0195 4.91016 32.2656 4.76562C32.5156 4.61719 32.8125 4.54297 33.1562 4.54297C33.2344 4.54297 33.3242 4.55273 33.4258 4.57227C33.5273 4.58789 33.5977 4.60547 33.6367 4.625ZM34.6328 2H35.7227V9.76953L35.6289 11H34.6328V2ZM40.0059 7.77734V7.90039C40.0059 8.36133 39.9512 8.78906 39.8418 9.18359C39.7324 9.57422 39.5723 9.91406 39.3613 10.2031C39.1504 10.4922 38.8926 10.7168 38.5879 10.877C38.2832 11.0371 37.9336 11.1172 37.5391 11.1172C37.1367 11.1172 36.7832 11.0488 36.4785 10.9121C36.1777 10.7715 35.9238 10.5703 35.7168 10.3086C35.5098 10.0469 35.3438 9.73047 35.2188 9.35938C35.0977 8.98828 35.0137 8.57031 34.9668 8.10547V7.56641C35.0137 7.09766 35.0977 6.67773 35.2188 6.30664C35.3438 5.93555 35.5098 5.61914 35.7168 5.35742C35.9238 5.0918 36.1777 4.89062 36.4785 4.75391C36.7793 4.61328 37.1289 4.54297 37.5273 4.54297C37.9258 4.54297 38.2793 4.62109 38.5879 4.77734C38.8965 4.92969 39.1543 5.14844 39.3613 5.43359C39.5723 5.71875 39.7324 6.06055 39.8418 6.45898C39.9512 6.85352 40.0059 7.29297 40.0059 7.77734ZM38.916 7.90039V7.77734C38.916 7.46094 38.8867 7.16406 38.8281 6.88672C38.7695 6.60547 38.6758 6.35938 38.5469 6.14844C38.418 5.93359 38.248 5.76562 38.0371 5.64453C37.8262 5.51953 37.5664 5.45703 37.2578 5.45703C36.9844 5.45703 36.7461 5.50391 36.543 5.59766C36.3438 5.69141 36.1738 5.81836 36.0332 5.97852C35.8926 6.13477 35.7773 6.31445 35.6875 6.51758C35.6016 6.7168 35.5371 6.92383 35.4941 7.13867V8.55078C35.5566 8.82422 35.6582 9.08789 35.7988 9.3418C35.9434 9.5918 36.1348 9.79688 36.373 9.95703C36.6152 10.1172 36.9141 10.1973 37.2695 10.1973C37.5625 10.1973 37.8125 10.1387 38.0195 10.0215C38.2305 9.90039 38.4004 9.73438 38.5293 9.52344C38.6621 9.3125 38.7598 9.06836 38.8223 8.79102C38.8848 8.51367 38.916 8.2168 38.916 7.90039ZM44.0078 11.1172C43.5664 11.1172 43.166 11.043 42.8066 10.8945C42.4512 10.7422 42.1445 10.5293 41.8867 10.2559C41.6328 9.98242 41.4375 9.6582 41.3008 9.2832C41.1641 8.9082 41.0957 8.49805 41.0957 8.05273V7.80664C41.0957 7.29102 41.1719 6.83203 41.3242 6.42969C41.4766 6.02344 41.6836 5.67969 41.9453 5.39844C42.207 5.11719 42.5039 4.9043 42.8359 4.75977C43.168 4.61523 43.5117 4.54297 43.8672 4.54297C44.3203 4.54297 44.7109 4.62109 45.0391 4.77734C45.3711 4.93359 45.6426 5.15234 45.8535 5.43359C46.0645 5.71094 46.2207 6.03906 46.3223 6.41797C46.4238 6.79297 46.4746 7.20312 46.4746 7.64844V8.13477H41.7402V7.25H45.3906V7.16797C45.375 6.88672 45.3164 6.61328 45.2148 6.34766C45.1172 6.08203 44.9609 5.86328 44.7461 5.69141C44.5312 5.51953 44.2383 5.43359 43.8672 5.43359C43.6211 5.43359 43.3945 5.48633 43.1875 5.5918C42.9805 5.69336 42.8027 5.8457 42.6543 6.04883C42.5059 6.25195 42.3906 6.5 42.3086 6.79297C42.2266 7.08594 42.1855 7.42383 42.1855 7.80664V8.05273C42.1855 8.35352 42.2266 8.63672 42.3086 8.90234C42.3945 9.16406 42.5176 9.39453 42.6777 9.59375C42.8418 9.79297 43.0391 9.94922 43.2695 10.0625C43.5039 10.1758 43.7695 10.2324 44.0664 10.2324C44.4492 10.2324 44.7734 10.1543 45.0391 9.99805C45.3047 9.8418 45.5371 9.63281 45.7363 9.37109L46.3926 9.89258C46.2559 10.0996 46.082 10.2969 45.8711 10.4844C45.6602 10.6719 45.4004 10.8242 45.0918 10.9414C44.7871 11.0586 44.4258 11.1172 44.0078 11.1172ZM50.3945 4.66016V5.49219H46.9668V4.66016H50.3945ZM48.127 3.11914H49.2109V9.42969C49.2109 9.64453 49.2441 9.80664 49.3105 9.91602C49.377 10.0254 49.4629 10.0977 49.5684 10.1328C49.6738 10.168 49.7871 10.1855 49.9082 10.1855C49.998 10.1855 50.0918 10.1777 50.1895 10.1621C50.291 10.1426 50.3672 10.127 50.418 10.1152L50.4238 11C50.3379 11.0273 50.2246 11.0527 50.084 11.0762C49.9473 11.1035 49.7812 11.1172 49.5859 11.1172C49.3203 11.1172 49.0762 11.0645 48.8535 10.959C48.6309 10.8535 48.4531 10.6777 48.3203 10.4316C48.1914 10.1816 48.127 9.8457 48.127 9.42383V3.11914ZM54.2969 11.1172C53.8555 11.1172 53.4551 11.043 53.0957 10.8945C52.7402 10.7422 52.4336 10.5293 52.1758 10.2559C51.9219 9.98242 51.7266 9.6582 51.5898 9.2832C51.4531 8.9082 51.3848 8.49805 51.3848 8.05273V7.80664C51.3848 7.29102 51.4609 6.83203 51.6133 6.42969C51.7656 6.02344 51.9727 5.67969 52.2344 5.39844C52.4961 5.11719 52.793 4.9043 53.125 4.75977C53.457 4.61523 53.8008 4.54297 54.1562 4.54297C54.6094 4.54297 55 4.62109 55.3281 4.77734C55.6602 4.93359 55.9316 5.15234 56.1426 5.43359C56.3535 5.71094 56.5098 6.03906 56.6113 6.41797C56.7129 6.79297 56.7637 7.20312 56.7637 7.64844V8.13477H52.0293V7.25H55.6797V7.16797C55.6641 6.88672 55.6055 6.61328 55.5039 6.34766C55.4062 6.08203 55.25 5.86328 55.0352 5.69141C54.8203 5.51953 54.5273 5.43359 54.1562 5.43359C53.9102 5.43359 53.6836 5.48633 53.4766 5.5918C53.2695 5.69336 53.0918 5.8457 52.9434 6.04883C52.7949 6.25195 52.6797 6.5 52.5977 6.79297C52.5156 7.08594 52.4746 7.42383 52.4746 7.80664V8.05273C52.4746 8.35352 52.5156 8.63672 52.5977 8.90234C52.6836 9.16406 52.8066 9.39453 52.9668 9.59375C53.1309 9.79297 53.3281 9.94922 53.5586 10.0625C53.793 10.1758 54.0586 10.2324 54.3555 10.2324C54.7383 10.2324 55.0625 10.1543 55.3281 9.99805C55.5938 9.8418 55.8262 9.63281 56.0254 9.37109L56.6816 9.89258C56.5449 10.0996 56.3711 10.2969 56.1602 10.4844C55.9492 10.6719 55.6895 10.8242 55.3809 10.9414C55.0762 11.0586 54.7148 11.1172 54.2969 11.1172ZM59.1133 5.65625V11H58.0293V4.66016H59.084L59.1133 5.65625ZM61.0938 4.625L61.0879 5.63281C60.998 5.61328 60.9121 5.60156 60.8301 5.59766C60.752 5.58984 60.6621 5.58594 60.5605 5.58594C60.3105 5.58594 60.0898 5.625 59.8984 5.70312C59.707 5.78125 59.5449 5.89062 59.4121 6.03125C59.2793 6.17188 59.1738 6.33984 59.0957 6.53516C59.0215 6.72656 58.9727 6.9375 58.9492 7.16797L58.6445 7.34375C58.6445 6.96094 58.6816 6.60156 58.7559 6.26562C58.834 5.92969 58.9531 5.63281 59.1133 5.375C59.2734 5.11328 59.4766 4.91016 59.7227 4.76562C59.9727 4.61719 60.2695 4.54297 60.6133 4.54297C60.6914 4.54297 60.7812 4.55273 60.8828 4.57227C60.9844 4.58789 61.0547 4.60547 61.0938 4.625ZM63.1797 5.87891V13.4375H62.0898V4.66016H63.0859L63.1797 5.87891ZM67.4512 7.77734V7.90039C67.4512 8.36133 67.3965 8.78906 67.2871 9.18359C67.1777 9.57422 67.0176 9.91406 66.8066 10.2031C66.5996 10.4922 66.3438 10.7168 66.0391 10.877C65.7344 11.0371 65.3848 11.1172 64.9902 11.1172C64.5879 11.1172 64.2324 11.0508 63.9238 10.918C63.6152 10.7852 63.3535 10.5918 63.1387 10.3379C62.9238 10.084 62.752 9.7793 62.623 9.42383C62.498 9.06836 62.4121 8.66797 62.3652 8.22266V7.56641C62.4121 7.09766 62.5 6.67773 62.6289 6.30664C62.7578 5.93555 62.9277 5.61914 63.1387 5.35742C63.3535 5.0918 63.6133 4.89062 63.918 4.75391C64.2227 4.61328 64.5742 4.54297 64.9727 4.54297C65.3711 4.54297 65.7246 4.62109 66.0332 4.77734C66.3418 4.92969 66.6016 5.14844 66.8125 5.43359C67.0234 5.71875 67.1816 6.06055 67.2871 6.45898C67.3965 6.85352 67.4512 7.29297 67.4512 7.77734ZM66.3613 7.90039V7.77734C66.3613 7.46094 66.3281 7.16406 66.2617 6.88672C66.1953 6.60547 66.0918 6.35938 65.9512 6.14844C65.8145 5.93359 65.6387 5.76562 65.4238 5.64453C65.209 5.51953 64.9531 5.45703 64.6562 5.45703C64.3828 5.45703 64.1445 5.50391 63.9414 5.59766C63.7422 5.69141 63.5723 5.81836 63.4316 5.97852C63.291 6.13477 63.1758 6.31445 63.0859 6.51758C63 6.7168 62.9355 6.92383 62.8926 7.13867V8.65625C62.9707 8.92969 63.0801 9.1875 63.2207 9.42969C63.3613 9.66797 63.5488 9.86133 63.7832 10.0098C64.0176 10.1543 64.3125 10.2266 64.668 10.2266C64.9609 10.2266 65.2129 10.166 65.4238 10.0449C65.6387 9.91992 65.8145 9.75 65.9512 9.53516C66.0918 9.32031 66.1953 9.07422 66.2617 8.79688C66.3281 8.51562 66.3613 8.2168 66.3613 7.90039ZM68.5469 7.90039V7.76562C68.5469 7.30859 68.6133 6.88477 68.7461 6.49414C68.8789 6.09961 69.0703 5.75781 69.3203 5.46875C69.5703 5.17578 69.873 4.94922 70.2285 4.78906C70.584 4.625 70.9824 4.54297 71.4238 4.54297C71.8691 4.54297 72.2695 4.625 72.625 4.78906C72.9844 4.94922 73.2891 5.17578 73.5391 5.46875C73.793 5.75781 73.9863 6.09961 74.1191 6.49414C74.252 6.88477 74.3184 7.30859 74.3184 7.76562V7.90039C74.3184 8.35742 74.252 8.78125 74.1191 9.17188C73.9863 9.5625 73.793 9.9043 73.5391 10.1973C73.2891 10.4863 72.9863 10.7129 72.6309 10.877C72.2793 11.0371 71.8809 11.1172 71.4355 11.1172C70.9902 11.1172 70.5898 11.0371 70.2344 10.877C69.8789 10.7129 69.5742 10.4863 69.3203 10.1973C69.0703 9.9043 68.8789 9.5625 68.7461 9.17188C68.6133 8.78125 68.5469 8.35742 68.5469 7.90039ZM69.6309 7.76562V7.90039C69.6309 8.2168 69.668 8.51562 69.7422 8.79688C69.8164 9.07422 69.9277 9.32031 70.0762 9.53516C70.2285 9.75 70.418 9.91992 70.6445 10.0449C70.8711 10.166 71.1348 10.2266 71.4355 10.2266C71.7324 10.2266 71.9922 10.166 72.2148 10.0449C72.4414 9.91992 72.6289 9.75 72.7773 9.53516C72.9258 9.32031 73.0371 9.07422 73.1113 8.79688C73.1895 8.51562 73.2285 8.2168 73.2285 7.90039V7.76562C73.2285 7.45312 73.1895 7.1582 73.1113 6.88086C73.0371 6.59961 72.9238 6.35156 72.7715 6.13672C72.623 5.91797 72.4355 5.74609 72.209 5.62109C71.9863 5.49609 71.7246 5.43359 71.4238 5.43359C71.127 5.43359 70.8652 5.49609 70.6387 5.62109C70.416 5.74609 70.2285 5.91797 70.0762 6.13672C69.9277 6.35156 69.8164 6.59961 69.7422 6.88086C69.668 7.1582 69.6309 7.45312 69.6309 7.76562ZM78.332 4.66016V5.49219H74.9043V4.66016H78.332ZM76.0645 3.11914H77.1484V9.42969C77.1484 9.64453 77.1816 9.80664 77.248 9.91602C77.3145 10.0254 77.4004 10.0977 77.5059 10.1328C77.6113 10.168 77.7246 10.1855 77.8457 10.1855C77.9355 10.1855 78.0293 10.1777 78.127 10.1621C78.2285 10.1426 78.3047 10.127 78.3555 10.1152L78.3613 11C78.2754 11.0273 78.1621 11.0527 78.0215 11.0762C77.8848 11.1035 77.7188 11.1172 77.5234 11.1172C77.2578 11.1172 77.0137 11.0645 76.791 10.959C76.5684 10.8535 76.3906 10.6777 76.2578 10.4316C76.1289 10.1816 76.0645 9.8457 76.0645 9.42383V3.11914ZM82.2344 11.1172C81.793 11.1172 81.3926 11.043 81.0332 10.8945C80.6777 10.7422 80.3711 10.5293 80.1133 10.2559C79.8594 9.98242 79.6641 9.6582 79.5273 9.2832C79.3906 8.9082 79.3223 8.49805 79.3223 8.05273V7.80664C79.3223 7.29102 79.3984 6.83203 79.5508 6.42969C79.7031 6.02344 79.9102 5.67969 80.1719 5.39844C80.4336 5.11719 80.7305 4.9043 81.0625 4.75977C81.3945 4.61523 81.7383 4.54297 82.0938 4.54297C82.5469 4.54297 82.9375 4.62109 83.2656 4.77734C83.5977 4.93359 83.8691 5.15234 84.0801 5.43359C84.291 5.71094 84.4473 6.03906 84.5488 6.41797C84.6504 6.79297 84.7012 7.20312 84.7012 7.64844V8.13477H79.9668V7.25H83.6172V7.16797C83.6016 6.88672 83.543 6.61328 83.4414 6.34766C83.3438 6.08203 83.1875 5.86328 82.9727 5.69141C82.7578 5.51953 82.4648 5.43359 82.0938 5.43359C81.8477 5.43359 81.6211 5.48633 81.4141 5.5918C81.207 5.69336 81.0293 5.8457 80.8809 6.04883C80.7324 6.25195 80.6172 6.5 80.5352 6.79297C80.4531 7.08594 80.4121 7.42383 80.4121 7.80664V8.05273C80.4121 8.35352 80.4531 8.63672 80.5352 8.90234C80.6211 9.16406 80.7441 9.39453 80.9043 9.59375C81.0684 9.79297 81.2656 9.94922 81.4961 10.0625C81.7305 10.1758 81.9961 10.2324 82.293 10.2324C82.6758 10.2324 83 10.1543 83.2656 9.99805C83.5312 9.8418 83.7637 9.63281 83.9629 9.37109L84.6191 9.89258C84.4824 10.0996 84.3086 10.2969 84.0977 10.4844C83.8867 10.6719 83.627 10.8242 83.3184 10.9414C83.0137 11.0586 82.6523 11.1172 82.2344 11.1172ZM87.0508 6.01367V11H85.9668V4.66016H86.9922L87.0508 6.01367ZM86.793 7.58984L86.3418 7.57227C86.3457 7.13867 86.4102 6.73828 86.5352 6.37109C86.6602 6 86.8359 5.67773 87.0625 5.4043C87.2891 5.13086 87.5586 4.91992 87.8711 4.77148C88.1875 4.61914 88.5371 4.54297 88.9199 4.54297C89.2324 4.54297 89.5137 4.58594 89.7637 4.67188C90.0137 4.75391 90.2266 4.88672 90.4023 5.07031C90.582 5.25391 90.7188 5.49219 90.8125 5.78516C90.9062 6.07422 90.9531 6.42773 90.9531 6.8457V11H89.8633V6.83398C89.8633 6.50195 89.8145 6.23633 89.7168 6.03711C89.6191 5.83398 89.4766 5.6875 89.2891 5.59766C89.1016 5.50391 88.8711 5.45703 88.5977 5.45703C88.3281 5.45703 88.082 5.51367 87.8594 5.62695C87.6406 5.74023 87.4512 5.89648 87.291 6.0957C87.1348 6.29492 87.0117 6.52344 86.9219 6.78125C86.8359 7.03516 86.793 7.30469 86.793 7.58984ZM95.2539 4.66016V5.49219H91.8262V4.66016H95.2539ZM92.9863 3.11914H94.0703V9.42969C94.0703 9.64453 94.1035 9.80664 94.1699 9.91602C94.2363 10.0254 94.3223 10.0977 94.4277 10.1328C94.5332 10.168 94.6465 10.1855 94.7676 10.1855C94.8574 10.1855 94.9512 10.1777 95.0488 10.1621C95.1504 10.1426 95.2266 10.127 95.2773 10.1152L95.2832 11C95.1973 11.0273 95.084 11.0527 94.9434 11.0762C94.8066 11.1035 94.6406 11.1172 94.4453 11.1172C94.1797 11.1172 93.9355 11.0645 93.7129 10.959C93.4902 10.8535 93.3125 10.6777 93.1797 10.4316C93.0508 10.1816 92.9863 9.8457 92.9863 9.42383V3.11914ZM97.7031 4.66016V11H96.6133V4.66016H97.7031ZM96.5312 2.97852C96.5312 2.80273 96.584 2.6543 96.6895 2.5332C96.7988 2.41211 96.959 2.35156 97.1699 2.35156C97.377 2.35156 97.5352 2.41211 97.6445 2.5332C97.7578 2.6543 97.8145 2.80273 97.8145 2.97852C97.8145 3.14648 97.7578 3.29102 97.6445 3.41211C97.5352 3.5293 97.377 3.58789 97.1699 3.58789C96.959 3.58789 96.7988 3.5293 96.6895 3.41211C96.584 3.29102 96.5312 3.14648 96.5312 2.97852ZM102.074 11.1172C101.633 11.1172 101.232 11.043 100.873 10.8945C100.518 10.7422 100.211 10.5293 99.9531 10.2559C99.6992 9.98242 99.5039 9.6582 99.3672 9.2832C99.2305 8.9082 99.1621 8.49805 99.1621 8.05273V7.80664C99.1621 7.29102 99.2383 6.83203 99.3906 6.42969C99.543 6.02344 99.75 5.67969 100.012 5.39844C100.273 5.11719 100.57 4.9043 100.902 4.75977C101.234 4.61523 101.578 4.54297 101.934 4.54297C102.387 4.54297 102.777 4.62109 103.105 4.77734C103.438 4.93359 103.709 5.15234 103.92 5.43359C104.131 5.71094 104.287 6.03906 104.389 6.41797C104.49 6.79297 104.541 7.20312 104.541 7.64844V8.13477H99.8066V7.25H103.457V7.16797C103.441 6.88672 103.383 6.61328 103.281 6.34766C103.184 6.08203 103.027 5.86328 102.812 5.69141C102.598 5.51953 102.305 5.43359 101.934 5.43359C101.688 5.43359 101.461 5.48633 101.254 5.5918C101.047 5.69336 100.869 5.8457 100.721 6.04883C100.572 6.25195 100.457 6.5 100.375 6.79297C100.293 7.08594 100.252 7.42383 100.252 7.80664V8.05273C100.252 8.35352 100.293 8.63672 100.375 8.90234C100.461 9.16406 100.584 9.39453 100.744 9.59375C100.908 9.79297 101.105 9.94922 101.336 10.0625C101.57 10.1758 101.836 10.2324 102.133 10.2324C102.516 10.2324 102.84 10.1543 103.105 9.99805C103.371 9.8418 103.604 9.63281 103.803 9.37109L104.459 9.89258C104.322 10.0996 104.148 10.2969 103.938 10.4844C103.727 10.6719 103.467 10.8242 103.158 10.9414C102.854 11.0586 102.492 11.1172 102.074 11.1172ZM108.438 11.1172C107.996 11.1172 107.596 11.043 107.236 10.8945C106.881 10.7422 106.574 10.5293 106.316 10.2559C106.062 9.98242 105.867 9.6582 105.73 9.2832C105.594 8.9082 105.525 8.49805 105.525 8.05273V7.80664C105.525 7.29102 105.602 6.83203 105.754 6.42969C105.906 6.02344 106.113 5.67969 106.375 5.39844C106.637 5.11719 106.934 4.9043 107.266 4.75977C107.598 4.61523 107.941 4.54297 108.297 4.54297C108.75 4.54297 109.141 4.62109 109.469 4.77734C109.801 4.93359 110.072 5.15234 110.283 5.43359C110.494 5.71094 110.65 6.03906 110.752 6.41797C110.854 6.79297 110.904 7.20312 110.904 7.64844V8.13477H106.17V7.25H109.82V7.16797C109.805 6.88672 109.746 6.61328 109.645 6.34766C109.547 6.08203 109.391 5.86328 109.176 5.69141C108.961 5.51953 108.668 5.43359 108.297 5.43359C108.051 5.43359 107.824 5.48633 107.617 5.5918C107.41 5.69336 107.232 5.8457 107.084 6.04883C106.936 6.25195 106.82 6.5 106.738 6.79297C106.656 7.08594 106.615 7.42383 106.615 7.80664V8.05273C106.615 8.35352 106.656 8.63672 106.738 8.90234C106.824 9.16406 106.947 9.39453 107.107 9.59375C107.271 9.79297 107.469 9.94922 107.699 10.0625C107.934 10.1758 108.199 10.2324 108.496 10.2324C108.879 10.2324 109.203 10.1543 109.469 9.99805C109.734 9.8418 109.967 9.63281 110.166 9.37109L110.822 9.89258C110.686 10.0996 110.512 10.2969 110.301 10.4844C110.09 10.6719 109.83 10.8242 109.521 10.9414C109.217 11.0586 108.855 11.1172 108.438 11.1172ZM113.348 2V11H112.258V2H113.348Z" fill="#1D2939"/>
                <defs>
                    <clipPath id="clip0_1902_43582">
                        <rect width="12" height="12" fill="white" transform="translate(0 1)"/>
                    </clipPath>
                </defs>
            </g>
        </>
    )
  }

  const Legend = () => (
    <div style={{ marginTop: 10, marginLeft: 10, whiteSpace: 'nowrap' }}>
      {Object.keys(scale).map((rank, idx) => (
        <Flex gap={8} align="center" key={`legend-${idx}`}>
          <div
            style={{
              backgroundColor: scale[rank],
              minWidth: 22,
              minHeight: 22,
              border: "1px solid gray",
            }}
          />
          <StyledText>{`${rank} ${ranks[rank]}`}</StyledText>
        </Flex>
      ))}
    </div>
  );

  return (
    <>
      <GlobalStyle />
        <Row style={{width: "100%"}}>
            {/* <Col span={8}>
                <Legend />
            </Col> */}
            <Col span={24}>
                <div
                    style={{
                      height: height || 600,
                      display: "flex",
                      justifyContent: "space-between",
                    }}
                >
                    <ResponsiveSankey
                      data={data}
                      margin={{ top: 50, right: 300, bottom: 0, left: 300, ...margin }}
                      sort={"input"}
                      labelPosition={"outside"}
                      colors={(node) => node.nodeColor}
                      enableLinkGradient={true}
                      linkOpacity={0.5}
                      nodeOpacity={1}
                      nodeBorderWidth={0}
                      nodeThickness={nodeThickness}
                      nodeSpacing={nodeSpacing}
                      nodeTooltip={({ node }) => {
                        return (
                          <CustomToolTip body={ nodeTooltip?.({node}) || <span>Node tooltip</span>} />
                        );
                      }}
                      linkTooltip={({ link }) => {
                        return (
                          <CustomToolTip body={ linkTooltip?.({link}) || <span>Link tooltip</span>} />
                        );
                      }}
                      layers={["links", "nodes", CustomNodeLayer, LabelLayer]}
                    />
                </div>
            </Col>
        </Row>

    </>
  );
};

export default BenchmarkSankey;
